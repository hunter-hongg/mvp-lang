# ğŸ“¦ Miva v0.0.3 Release Notes

> **Version Slogan**: From Usable to Great  
> **Core Goal**: Strengthen language principles, avoid implicit behavior  
> **Release Date**: February 2026  
> **Previous Version**: v0.0.2

---

## ğŸ“‹ Version Overview

| Dimension | v0.0.2 | v0.0.3 | Change |
| :--- | :--- | :--- | :--- |
| **Ownership** | Basic model | Complete static checking | âœ… New |
| **FFI** | None | C language interoperability | âœ… New |
| **Safety Model** | None | unsafe/trusted layers | âœ… New |
| **Standard Library** | Test code | Basically usable | âœ… New |
| **Testing** | None | Built-in test framework | âœ… New |
| **Modules** | Basic import | Circular dependency detection | âœ… New |
| **Project Name** | MVP | **Miva** | âš ï¸ Breaking |

---

## âš ï¸ Breaking Changes

### Project Name Change

Starting from v0.0.3, the project is officially renamed from **MVP** to **Miva Programming Language**.

**Migration Guide**:

| Old Name | New Name | Description |
| :--- | :--- | :--- |
| `mvp.toml` | `miva.toml` | Project configuration file |
| `.mvp` | `.miva` | Source file extension |
| `MVP` | `Miva` | All references in documentation/code |
| `mvp-lang` | `miva-lang` | GitHub repository name |

> ğŸ’¡ **Tip**: The old repository URL will remain redirected, but migrating to the new name is recommended.

---

## âœ¨ New Features

### 1. Ownership Static Checking ğŸ”’

Complete compile-time ownership checking to eliminate use-after-free and double-free.

**Checking Scope**:

| Scenario | Behavior | Status |
| :--- | :--- | :--- |
| `move ref_x` | âŒ Error: Cannot move a borrowed reference | Implemented |
| `clone ref_x` | âœ… Pass, normal copy | Implemented |
| `choose` branch move | âœ… Pessimistic merge checking | Implemented |
| Function returns ref | âŒ Error: Cannot return borrowed reference | Implemented |

**Compilation Flow**:
```
Source â†’ Lexical Analysis â†’ Syntax Analysis â†’ Semantic Analysis â†’ [Ownership Check] â†’ Code Generation
                                                                 â†‘
                                                             v0.0.3 New
```

---

### 2. FFI Framework ğŸŒ‰

Seamless interoperability with C language.

**Syntax**:
```miva
import "c:stdio.h"        // Translates to #include <stdio.h>
import "c:stdlib.h"       // Translates to #include <stdlib.h>
import "c:mylib/mylib.h"  // Translates to #include "mylib/mylib.h"
```

**Implementation Details**:

| Issue | Solution |
| :--- | :--- |
| Header search paths | Add `-I` flag, supports `$MIVA_INCLUDE` environment variable |
| Namespace | `c.xxx` â†’ `xxx` (prefix removed) |
| Name conflicts | Detect Miva built-in function names, report error |
| Safety | Can only be called in `unsafe` or `trusted` functions |

**Example**:
```miva
import "c:stdio.h"

unsafe main = () => {
    c.printf("Hello, %d\n", 42)
}
```

---

### 3. unsafe/trusted Safety Model ğŸ›¡ï¸

Three-layer safety model, more granular unsafe management than Rust.

| Type | Definition | Call Rules |
| :--- | :--- | :--- |
| **safe** | Default, no unsafe calls | Can call safe/trusted |
| **unsafe** | Contains unsafe operations | Can only be called by unsafe/trusted |
| **trusted** | Contains unsafe but author guarantees safety | Can be called by any function |

**Example**:
```miva
// unsafe function (must be explicitly declared)
unsafe foo = () => {
    c.printf("hello")
}

// trusted function (author guarantees safety)
trusted bar = () => {
    foo()  // Internal encapsulation, externally safe
}

// safe function (default)
baz = () => {
    bar()  // Can call trusted
}
```

---

### 4. Basic Standard Library ğŸ“š

```
$MIVA_STD/
â””â”€â”€ std/
    â”œâ”€â”€ io.miva       (* Input/Output *)
    â”œâ”€â”€ term.miva     (* Terminal control *)
    â””â”€â”€ str.miva      (* String operations *)
```

---

### 5. Inline C Code ğŸ”§

Support for directly inlining C/C++ code in Miva source.

**Syntax**:
```miva
c unsafe foo = (inp1: int, inp2: int): int => """
    return inp1 + inp2;
"""
```

**Checking Rules**:

| Check Item | Rule |
| :--- | :--- |
| C code validation | Not validated (user assumes risk) |
| Safety | Automatically marked as `unsafe` |
| Nesting | Nested `c unsafe` not allowed |

**Generated Code**:
```cpp
// Direct inline, zero overhead
auto foo = [](int inp1, int inp2) -> int {
    return inp1 + inp2;
};
```

---

### 6. Circular Dependency Detection ğŸ”

Compile-time detection of module circular dependencies to avoid compilation errors.

**Algorithm**: DFS cycle detection

**Error Example**:
```miva
// a.miva
import "b"  // âŒ Circular dependency: a â†’ b â†’ a

// b.miva
import "a"
```

**Error Output**:
```
error: Circular dependency detected
  --> a.miva:1:1
   |
1  | import "b"
   | ^^^^^^^^^^
   |
   = note: a â†’ b â†’ a
```

---

### 7. Basic Test Framework ğŸ§ª

Built-in testing support, no external tools required.

**Syntax**:
```miva
test io_print = () => {
    std.io.println("hello")
}

test assert_demo = () => {
    assert(1 + 1 == 2)
    assert_eq(add(2, 3), 5)
}
```

**Commands**:

| Command | Description |
| :--- | :--- |
| `miva test` | Run all tests |

**Implementation Details**:

| Feature | Implementation |
| :--- | :--- |
| Compilation | Test functions compiled as normal functions |
| Output | Separate `.cpp` file with main entry |
| Return value | `0` = all passed, `non-zero` = failures |
| panic handling | panic returns non-zero |

---

## ğŸ› Known Issues

| ID | Issue | Severity | Planned Fix |
| :--- | :--- | :--- | :--- |
| #001 | Error messages not user-friendly enough | Medium | v0.1.0 |
| #002 | Standard library documentation incomplete | Low | v0.0.4 |
| #003 | Windows support incomplete | Medium | v0.0.5 |
| #004 | Generics not yet implemented | High | v0.1.0 |

---

## ğŸ™ Acknowledgments

Thanks to all contributors and early users!

- Project Repository: https://github.com/hunter-hongg/miva-lang
- Issue Tracker: https://github.com/hunter-hongg/miva-lang/issues
- Documentation: https://hunter-hongg.github.io/miva-lang/

---

## ğŸ“… Roadmap

| Version | Goal | Estimated Time |
| :--- | :--- | :--- |
| v0.0.4 | Improve error messages, complete documentation | March 2026 |
| v0.0.5 | Windows support, performance optimization | April 2026 |
| v0.1.0 | Generics support, Shape system | June 2026 |
| v1.0.0 | Stable ABI, production ready | End of 2026 |

---

> **Miva â€” Explicit. Safe. Predictable.**