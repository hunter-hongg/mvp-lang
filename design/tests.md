# MVP测试规范

## 定义
```mvp
test foo /* 不能是unsafe或trusted */ = (/*固定无入参*/): int /* 固定返回值 */ => {
  ...
}
```

## 规范
- 在测试函数内，**panic**表示失败，返回非0值
- 其他情况，若返回0值测试通过，否则测试失败
- 测试失败，执行下一个测试，**不立即停止知道测试执行完毕**
- 测试函数在Semantic阶段检查入参和返回值是否符合要求，不接受普通函数的语义检查
- 测试函数不计入符号表
- 测试函数应生成在单独C++文件与普通文件分开（codegen特殊处理，生成代码方面与普通函数相同），#include对应头文件
- `mvp test`用于运行模块的所有已编译文件的测试（`$MVP_CACHE/src/`下）

## 逼我写的注意事项
1. 不要自作多情！这是我的语言，不是你的语言
2. 没人规定只有一个测试，没人规定只有src/main.mvp是唯一已编译的文件
3. 普通函数如何生成代码，测试函数如何生成——我不信你这都不会 
4. 没人规定自动返回return 0;你加干啥